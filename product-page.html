<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Product Page</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
/* ===============================
   RESET & BODY
================================ */
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'Poppins', sans-serif; color: #111; background: #fff; margin: 0; }
.container { max-width: 100%; padding: 0 20px; margin: 0 auto; }

/* ===============================
   FULL WIDTH SECTION STYLING
================================ */
section { width: 100%; padding: 40px 0; }
section h2 { font-size: 28px; margin-bottom: 20px; text-align: center; }

/* ===============================
   PRODUCT INFO SECTION
================================ */
.product-info-section {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  justify-content: center;

  gap: 40px;              /* spacing BETWEEN gallery & details */
  padding: 0 40px;        /* 40px OUTSIDE left & right */
}

.product-gallery {
  flex: 1 1 400px;
  display: flex;
  flex-direction: column;
  gap: 40px;              /* spacing INSIDE gallery */
}

.product-gallery img {
  width: 100%;
  aspect-ratio: 4 / 5;
  object-fit: cover;
  border-radius: 12px;
}

.product-thumbnails {
  display: flex;
  gap: 40px;              /* spacing BETWEEN thumbnails */
}

.product-thumbnails img {
  width: 72px;
  height: 72px;
  object-fit: cover;
  border-radius: 8px;
  cursor: pointer;
  opacity: 0.6;
  border: 2px solid transparent;
  transition: 0.2s;
}

.product-thumbnails img.active {
  opacity: 1;
  border-color: #111;
}

.product-details {
  flex: 1 1 400px;
  display: flex;
  flex-direction: column;
  gap: 40px;              /* spacing INSIDE details */
}

.product-details h1 { font-size: 32px; }
.product-price { font-size: 24px; font-weight: 600; }
.product-old-price { font-size: 18px; text-decoration: line-through; color: #999; }
.product-description { font-size: 15px; line-height: 1.6; color: #444; }

.cta-buttons {
  display: flex;
  gap: 40px;              /* spacing BETWEEN buttons */
  margin-top: 20px;
}

.cta-buttons button {
  flex: 1;
  padding: 14px 26px;
  border-radius: 999px;
  border: none;
  font-size: 14px;
  cursor: pointer;
}

#addToCart { background: #111; color: #fff; }
#buyNow { background: #ff4500; color: #fff; }

.license-options {
  display: flex;
  gap: 40px;              /* spacing BETWEEN license options */
  margin-top: 10px;
}

.license-options label {
  display: flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
}

   @media (max-width: 768px) {
  .product-info-section {
    padding: 0 20px;
    gap: 24px;
  }
}

/* ===============================
   ACCORDION / DETAILS SECTION
================================ */
.accordion {
  display: flex;
  flex-direction: column;
  gap: 12px;
  max-width: 800px;
  margin: 0 auto;
}

.accordion-item {
  background: #F7F5ED;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid #f0ede4;
}

.accordion-header {
  padding: 0 20px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-weight: 500;
  cursor: pointer;
  border: none;
  background: transparent;
}

.accordion-content {
  max-height: 0;
  overflow: hidden;
  padding: 0 20px;
  transition: max-height 0.35s ease, padding 0.35s ease;
}

.accordion-item.active .accordion-content {
  padding: 12px 20px 20px;
}

/* ===============================
   RELATED ITEMS SECTION
================================ */
.related-items-section {
  overflow: hidden;
  position: relative;
}

.related-slider-wrapper {
  display: flex;
  align-items: center;
}

.related-grid {
  display: flex;
  gap: 20px;
  overflow-x: auto;
  scroll-behavior: smooth;
  padding-bottom: 10px;
}

.related-grid::-webkit-scrollbar { display: none; }

.related-card {
  flex: 0 0 auto;
  width: 180px;
  border: 1px solid #eee;
  border-radius: 12px;
  padding: 12px;
  text-align: center;
  background: #fff;
  transition: transform 0.2s, box-shadow 0.2s;
  cursor: pointer;
}

.related-card:hover {
  transform: scale(1.05);
  box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}

.related-card img {
  width: 100%;
  aspect-ratio: 1/1;
  object-fit: cover;
  border-radius: 12px;
}

.slider-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  border: none;
  background: rgba(0,0,0,0.5);
  color: #fff;
  font-size: 24px;
  width: 40px;
  height: 60px;
  cursor: pointer;
  z-index: 2;
  border-radius: 6px;
}

.slider-btn.prev { left: 0; }
.slider-btn.next { right: 0; }

/* ===============================
   ARTIST CARD & TESTIMONIALS
================================ */
.artist-card-section, .testimonials-section {
  max-width: 1200px;
  margin: 0 auto;
}

@media (max-width: 768px) {
  .product-info-section { flex-direction: column; }
  .related-card { width: 140px; }
  .slider-btn { width: 32px; height: 48px; font-size: 20px; }
}

@media (max-width: 480px) {
  .related-card { width: 120px; }
  section h2 { font-size: 20px; }
}

   /* ===============================
   SOFT CARD LAYER (NON-BREAKING)
================================ */

/* Create inner card feeling without changing HTML */
.product-info-section,
.accordion-section,
.related-items-section,
.artist-card-section,
.testimonials-section {
  position: relative;
}

/* Product main card */
.product-info-section::before {
  content: "";
  position: absolute;
  inset: 0;
  max-width: 1200px;
  margin: auto;
  background: #F7F5ED;
  border-radius: 28px;
  z-index: -1;
}

/* Product gallery card */
.product-gallery {
  background: #fff;
  padding: 16px;
  border-radius: 24px;
}

/* Product details card */
.product-details {
  background: #fff;
  padding: 28px;
  border-radius: 24px;
}

/* Main image polish */
#mainImage {
  border-radius: 20px;
}

/* ===============================
   SLIDER ARROWS (YOU ALREADY CREATE THEM)
================================ */
.slider-arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0,0,0,0.6);
  color: #fff;
  width: 44px;
  height: 44px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  cursor: pointer;
  z-index: 3;
}

.slider-arrow.left { left: 16px; }
.slider-arrow.right { right: 16px; }

/* ===============================
   RIBBON & BUBBLES (YOU CREATE THEM IN JS)
================================ */
.top-label {
  position: absolute;
  top: 16px;
  left: 16px;
  background: #ff4500;
  color: #fff;
  padding: 6px 14px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 500;
}

.top-bubbles {
  position: absolute;
  top: 16px;
  right: 16px;
  display: flex;
  gap: 6px;
}

.top-bubbles div {
  background: #111;
  color: #fff;
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 11px;
}

/* ===============================
   ACCORDION CARD FEEL
================================ */
.accordion-item {
  box-shadow: 0 6px 20px rgba(0,0,0,0.06);
}

/* ===============================
   RELATED ITEMS POLISH
================================ */
.related-items-section::before {
  content: "";
  position: absolute;
  inset: 0;
  max-width: 1200px;
  margin: auto;
  background: #F7F5ED;
  border-radius: 28px;
  z-index: -1;
}

/* Buttons hover polish */
.cta-buttons button {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.cta-buttons button:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.15);
}

</style>
</head>
<body>

<!-- ===============================
     PRODUCT INFO SECTION
================================ -->
<section class="product-info-section">
  <div class="product-gallery">
    <img id="mainImage" src="">
    <div class="product-thumbnails" id="thumbnails"></div>
  </div>
  <div class="product-details">
    <h1 id="title">Demo Product</h1>
    <div class="product-price" id="price">$19.99</div>
    <div class="product-old-price" id="oldPrice">$29.99</div>
    <div class="product-description" id="description">
      Demo description here.
    </div>
    <div class="license-options">
      <label><input type="radio" name="license" value="personal" checked> Personal</label>
      <label><input type="radio" name="license" value="commercial"> Commercial</label>
      <label><input type="radio" name="license" value="extended"> Extended</label>
    </div>
    <div class="cta-buttons">
      <button id="addToCart">Add to Cart</button>
      <button id="buyNow">Buy Now</button>
    </div>
  </div>
</section>

<!-- ===============================
     ACCORDION / DETAILS SECTION
================================ -->
<section class="accordion-section">
  <h2>Product Details Section</h2>
  <div class="accordion">
    <div class="accordion-item">
      <button class="accordion-header">High-Resolution Digital Art Prints</button>
      <div class="accordion-content">
        <p>High-resolution files with crisp details for printing.</p>
      </div>
    </div>
    <div class="accordion-item">
      <button class="accordion-header">Instant Download Via Email</button>
      <div class="accordion-content">
        <p>Files sent directly to your email after purchase.</p>
      </div>
    </div>
    <div class="accordion-item">
      <button class="accordion-header">Usage License</button>
      <div class="accordion-content">
        <p>For personal use only. Contact us for commercial licenses.</p>
      </div>
    </div>
  </div>
</section>

<!-- ===============================
     RELATED ITEMS SECTION
================================ -->
<section class="related-items-section">
  <h2>Related Items Section</h2>
  <div class="related-slider-wrapper">
    <button class="slider-btn prev">‹</button>
    <div id="relatedGrid" class="related-grid"></div>
    <button class="slider-btn next">›</button>
  </div>
</section>

<!-- ===============================
     ARTIST CARD SECTION
================================ -->
<section class="artist-card-section">
  <h2>Artist Card Section</h2>
  <div id="artist-card-placeholder"></div>
</section>

<!-- ===============================
     TESTIMONIALS SECTION
================================ -->
<section class="testimonials-section">
  <h2>Testimonials Section</h2>
  <div id="testimonials-placeholder"></div>
</section>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  // ---------------- ELEMENTS ----------------
  const titleEl = document.getElementById("title");
  const priceEl = document.getElementById("price");
  const oldPriceEl = document.getElementById("oldPrice");
  const descEl = document.getElementById("description");
  const mainImage = document.getElementById("mainImage");
  const thumbsEl = document.getElementById("thumbnails");
  const relatedGrid = document.getElementById("relatedGrid");
  const addToCartBtn = document.getElementById("addToCart");

  // ---------------- GET PRODUCT ID ----------------
  const productId = new URLSearchParams(location.search).get("id");

  // ---------------- UTILITIES ----------------
  function slugify(str){
    return str.toLowerCase().trim().replace(/&/g,'and').replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,'');
  }

  function switchMainImage(imgEl, src, thumbsContainer) {
    imgEl.src = src;
    thumbsContainer.querySelectorAll("img").forEach(t => t.classList.remove("active"));
    thumbsContainer.querySelector(`img[src='${src}']`)?.classList.add("active");
  }

  function createThumbnail(src, mainImgEl, thumbsContainer){
    const t = document.createElement("img");
    t.src = src;
    t.onclick = () => switchMainImage(mainImgEl, src, thumbsContainer);
    return t;
  }

  // ---------------- LOAD CSV ----------------
  Papa.parse("https://hirshtom-web.github.io/ab/product-catalog.csv", {
    download: true,
    header: true,
    skipEmptyLines: true,
    complete: function(res) {
      const allProducts = res.data.map(p => ({
        id: (p.productId || p.ProductId || "").trim(),
        name: (p.name || p.Name || "").trim(),
        price: (p.price || p.Price || "$1").trim(),
        discount: (p.discountValue || "").trim(),
        ribbon: (p.ribbon || p.Ribbon || "").trim(),
        category: (p.category || p.Category || "").trim(),
        color: (p.color || p.Color || "").trim(),
        description: p.description || "",
        images: (p.productImageUrl || p.ProductImageUrl || "").split(";").map(u=>u.trim()).filter(Boolean)
      }));

      // Find product
      const product = allProducts.find(p => p.id === productId || slugify(p.name) === productId?.toLowerCase());
      if(!product){ console.warn("Product not found!"); return; }

      // --- TEXT ---
      titleEl.innerText = product.name;
      priceEl.innerText = "$" + product.price;
      oldPriceEl.innerText = product.discount ? "$" + product.discount : "";
      descEl.innerHTML = product.description;

      // --- MAIN IMAGE & THUMBNAILS ---
      const images = product.images.map(src => src.includes("http") ? src : "https://static.wixstatic.com/media/" + src);
      if(images.length) mainImage.src = images[0];

      thumbsEl.innerHTML = "";
      images.forEach(src => thumbsEl.appendChild(createThumbnail(src, mainImage, thumbsEl)));

      // --- IMAGE SLIDER (arrows + swipe) ---
      let currentImageIndex = 0;
      function switchImage(dir){
        if(!images.length) return;
        currentImageIndex = (currentImageIndex + dir + images.length) % images.length;
        switchMainImage(mainImage, images[currentImageIndex], thumbsEl);
      }

      mainImage.parentElement.querySelectorAll(".slider-arrow").forEach(arrow => arrow.remove());
      if(images.length > 1){
        ["left","right"].forEach(dir => {
          const a = document.createElement("div");
          a.className = `slider-arrow ${dir}`;
          a.innerHTML = dir==="left"?"&#10094;":"&#10095;";
          a.onclick = e => { e.preventDefault(); switchImage(dir==="left"?-1:1); };
          mainImage.parentElement.appendChild(a);
        });

        let startX=0;
        mainImage.parentElement.addEventListener("touchstart", e => startX = e.touches[0].clientX);
        mainImage.parentElement.addEventListener("touchend", e => {
          const dx = e.changedTouches[0].clientX - startX;
          if(dx>30) switchImage(-1);
          if(dx<-30) switchImage(1);
        });
      }

      // --- RIBBON & BUBBLES ---
      if(product.ribbon){
        const rEl = document.createElement("div");
        rEl.className="top-label";
        rEl.innerText = product.ribbon;
        mainImage.parentElement.appendChild(rEl);
      }

      const bubbles = [product.category, product.color].filter(Boolean);
      if(bubbles.length){
        const bEl = document.createElement("div");
        bEl.className="top-bubbles";
        bubbles.forEach(t=>{
          const d = document.createElement("div");
          d.innerText = t;
          bEl.appendChild(d);
        });
        mainImage.parentElement.appendChild(bEl);
      }

      // --- RELATED PRODUCTS ---
      const related = allProducts.filter(p => p.id !== product.id).slice(0, 10);
      relatedGrid.innerHTML = "";
      related.forEach(r => {
        const card = document.createElement("div");
        card.className = "related-card";
        const img = document.createElement("img");
        img.src = r.images[0] ? (r.images[0].includes("http") ? r.images[0] : "https://static.wixstatic.com/media/"+r.images[0]) : "https://via.placeholder.com/300";
        const h4 = document.createElement("h4");
        h4.innerText = r.name;
        card.appendChild(img);
        card.appendChild(h4);
        card.onclick = () => location.href = `product-page.html?id=${r.id}`;
        relatedGrid.appendChild(card);
      });
    }
  });

  // ---------------- ADD TO CART ----------------
  addToCartBtn.onclick = () => {
    const selectedLicense = document.querySelector('input[name="license"]:checked')?.value || "default";
    alert(`Added ${titleEl.innerText} (${selectedLicense}) to cart!`);
  };

  // ---------------- ACCORDION ----------------
  document.querySelectorAll(".accordion-header").forEach(header => {
    header.onclick = () => {
      const item = header.parentElement;
      item.classList.toggle("active");
      const content = header.nextElementSibling;
      content.style.maxHeight = item.classList.contains("active") ? content.scrollHeight + "px" : null;
    };
  });

  // ---------------- RELATED SLIDER ----------------
  const slider = relatedGrid;
  document.querySelectorAll(".slider-btn.next").forEach(btn => btn.onclick = () => slider.scrollBy({left:240,behavior:'smooth'}));
  document.querySelectorAll(".slider-btn.prev").forEach(btn => btn.onclick = () => slider.scrollBy({left:-240,behavior:'smooth'}));

  // ---------------- LOAD EXTERNAL ----------------
  fetch("artist-card.html").then(r=>r.text()).then(html=>document.getElementById("artist-card-placeholder").innerHTML=html);
  fetch("testimonials.html").then(r=>r.text()).then(html=>document.getElementById("testimonials-placeholder").innerHTML=html);
});
</script>




</body>
</html>

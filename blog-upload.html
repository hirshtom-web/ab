<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Upload Blog Post</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Poppins', sans-serif;
    max-width: 900px;
    margin: 40px auto;
  }
  input, button, select, textarea {
    width: 100%;
    margin-bottom: 12px;
    padding: 10px;
    font-size: 14px;
  }
  .editor-toolbar button {
    width: auto;
    margin-right: 5px;
    margin-bottom: 5px;
  }
  #editor {
    border: 1px solid #ccc;
    min-height: 200px;
    padding: 10px;
    line-height: 1.6;
    overflow-y: auto;
  }
  pre {
    background: #f5f5f5;
    padding: 16px;
    white-space: pre-wrap;
    word-break: break-word;
  }
</style>
</head>
<body>

<h1>Upload Blog Post</h1>

<form id="blogForm">
  <input id="title" placeholder="Article Title" required />
  <input id="subtitle" placeholder="Article Subtitle" />
  <input id="author" placeholder="Author Name" />
  <input id="date" type="date" />
  <input id="views" placeholder="Views" type="number" />
  <input id="likes" placeholder="Likes" type="number" />
  <input id="readTime" placeholder="Read time (minutes)" type="number" />
  <input id="image" placeholder="Hero Image URL" />

  <h3>Content</h3>
  <div class="editor-toolbar">
    <button type="button" onclick="format('bold')"><b>B</b></button>
    <button type="button" onclick="format('italic')"><i>I</i></button>
    <button type="button" onclick="format('underline')"><u>U</u></button>
    <button type="button" onclick="format('insertUnorderedList')">â€¢ List</button>
    <button type="button" onclick="format('insertOrderedList')">1. List</button>
    <button type="button" onclick="createLink()">Link</button>
    <button type="button" onclick="format('formatBlock', '<h3>')">Title</button>
    <button type="button" onclick="format('formatBlock', '<p>')">Text</button>
  </div>
  <div id="editor" contenteditable="true"></div>

  <button type="submit">Generate CSV Row</button>
</form>

<h3>CSV Row</h3>
<pre id="output"></pre>

<script>
  function format(command, value = null) {
    document.execCommand(command, false, value);
  }

  function createLink() {
    const url = prompt("Enter the URL");
    if(url) format('createLink', url);
  }

  function generateSlug(text) {
    return text.toLowerCase().trim().replace(/[^\w\s-]/g, '').replace(/\s+/g, '-');
  }

  document.getElementById("blogForm").addEventListener("submit", e => {
    e.preventDefault();

    const title = document.getElementById("title").value.trim();
    const subtitle = document.getElementById("subtitle").value.trim();
    const author = document.getElementById("author").value.trim();
    const date = document.getElementById("date").value || new Date().toISOString().split("T")[0];
    const views = document.getElementById("views").value || 0;
    const likes = document.getElementById("likes").value || 0;
    const readTime = document.getElementById("readTime").value || 0;
    const image = document.getElementById("image").value.trim();
    const content = document.getElementById("editor").innerHTML.replace(/"/g, '""');

    const postId = generateSlug(title);

    const row = [
      postId,
      `"${title.replace(/"/g,'""')}"`,
      `"${subtitle.replace(/"/g,'""')}"`,
      author,
      date,
      image,
      views,
      likes,
      readTime,
      `"${content}"`
    ].join(",");

    document.getElementById("output").textContent = row;
  });
</script>

</body>
</html>
